spring.application.name=GATEWAY-SERVICE
server.port=9999


# Configuration Eureka (Conservée, mais les routes ci-dessous l'ignorent)
eureka.instance.prefer-ip-address=true
eureka.client.service-url.defaultZone=http://localhost:8761/eureka

spring.main.web-application-type=reactive

# --- Configuration JWT (CLE SYNCHRONISÉE) ---
app.jwt-secret=WXpIczd2R1d3NTViSDF2SjhTNEFhVzVvR0R6c0hXNTRaQ2d5M1p4WnJmQTdhc2VkMTIxMzBzb3RoZWZpcnN0dGltZTY1NDMyMXNlY29uZGZpcnN0dGltZXNlY29uZA==
app.jwt-expiration-milliseconds=36000000

# Configuration CORS globale
spring.cloud.gateway.globalcors.corsConfigurations.[/**].allowedOrigins=*
spring.cloud.gateway.globalcors.corsConfigurations.[/**].allowedMethods=GET,POST,PUT,DELETE,OPTIONS
spring.cloud.gateway.globalcors.corsConfigurations.[/**].allowedHeaders=*

# --- ROUTES VERS LES SERVICES (PORTS DIRECTS SANS STRIPPREFIX) ---

# Routes Users (Port 8083)
spring.cloud.gateway.routes[0].id=user-service
spring.cloud.gateway.routes[0].uri=http://localhost:8083 
spring.cloud.gateway.routes[0].predicates[0]=Path=/api/v1/users/**
spring.cloud.gateway.routes[0].filters[0]=JwtAuth
# spring.cloud.gateway.routes[0].filters[1]=StripPrefix=2 <-- FILTRE RETIRÉ

# Routes Appointments (Port 8085)
spring.cloud.gateway.routes[1].id=appointment-service
spring.cloud.gateway.routes[1].uri=http://localhost:8085 
spring.cloud.gateway.routes[1].predicates[0]=Path=/api/v1/appointments/**
spring.cloud.gateway.routes[1].filters[0]=JwtAuth
# spring.cloud.gateway.routes[1].filters[1]=StripPrefix=2 <-- FILTRE RETIRÉ

# Routes Locations (Port 8086)
spring.cloud.gateway.routes[2].id=location-service
spring.cloud.gateway.routes[2].uri=http://localhost:9090
spring.cloud.gateway.routes[2].predicates[0]=Path=/api/v1/localities/**
spring.cloud.gateway.routes[2].filters[0]=JwtAuth
# spring.cloud.gateway.routes[2].filters[1]=StripPrefix=2 <-- FILTRE RETIRÉ

# Routes Vaccinations (Port 8088)
spring.cloud.gateway.routes[3].id=vaccination-service
spring.cloud.gateway.routes[3].uri=http://localhost:8088 
spring.cloud.gateway.routes[3].predicates[0]=Path=/api/v1/vaccinations/**
spring.cloud.gateway.routes[3].filters[0]=JwtAuth
# spring.cloud.gateway.routes[3].filters[1]=StripPrefix=2 <-- FILTRE RETIRÉ

# Routes Vaccines (Port 8089)
spring.cloud.gateway.routes[4].id=vaccine-service
spring.cloud.gateway.routes[4].uri=http://localhost:8089 
spring.cloud.gateway.routes[4].predicates[0]=Path=/api/v1/vaccines/**
spring.cloud.gateway.routes[4].filters[0]=JwtAuth
# spring.cloud.gateway.routes[4].filters[1]=StripPrefix=2 <-- FILTRE RETIRÉ

# Routes Auth (Port 8081)
spring.cloud.gateway.routes[5].id=auth-service1
spring.cloud.gateway.routes[5].uri=http://localhost:8081
spring.cloud.gateway.routes[5].predicates[0]=Path=/api/auth/v1/**
# Pas de filtre JwtAuth ni de StripPrefix ici.
